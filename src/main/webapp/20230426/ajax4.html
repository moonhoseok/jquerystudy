<!DOCTYPE html>
<!-- /jquerystudy/src/main/webapp/20230426/ajax4.html -->
<html>
<head>
<meta charset="UTF-8">
<title>ajax.js 파일을 이용하여 전송하기</title>
<script type="text/javascript" src="../js/ajax.js"></script>
<script type="text/javascript">
	window.onload= function(){
		ajax("test.txt", null,getMax,"GET") // 서버전송
	}
	function getMax(){ //callBack 함수
		if(this.readyState==4&& this.status==200){
			console.log(this.responseText)
			// nums : 배열. 숫자(실수)형태의 문자열
			const nums = this.responseText.split(",")
			let max = parseFloat(nums[0].trim())
			for(let i=1; i< nums.length;i++){
				nums[i] = parseFloat(nums[i].trim())
				if(max < nums[i]) max = nums[i]
			}
			document.querySelector("#result").innerHTML =
				"<strong>["+this.responseText+"] 중 최대값 : "+max+"</strong>"
		}
	}
</script>
</head>
<body>
<div id="result"></div>
</body>
</html>